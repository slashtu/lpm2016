!function(a){"use strict";var b=a(".mpc-pagination--infinity");b.each(function(){var b=a(this);new MPCwaypoint({element:b[0],handler:function(){b.addClass("mpc-infinity-init").trigger("mpc.infinity")},offset:"80%"})});var c=a(".mpc-pagination");c.on("mpc.init",function(){function b(b,c,d){a.post(_mpc_vars.ajax_url,{action:"mpc_pagination_set",type:c,current:b.paged,query:b,dataType:"json"},function(e){var f=a("#"+b.target),g=d.parents(".mpc-pagination"),h=f.find(".mpc-template").clone(),i=JSON.parse(e),j=/{{(.*?)}}/gi;if(h.removeClass("mpc-template").addClass(h.attr("data-template")),"classic"==c){var k=f.children(":not(.mpc-template)").remove();f.isotope("remove",k)}a.each(i.items,function(a,b){var c=h.clone(),d=c.html();d=d.replace(j,function(a,c){return null!=b[c.toLowerCase()]?b[c.toLowerCase()]:""}),c.html(d),f.isotope("insert",c)}),f.trigger("mpc.loaded"),"infinity"==c&&g.removeClass("mpc-infinity--init"),g.attr("data-current",i.settings.current).attr("data-pages",i.settings.pages),!g.is(".mpc-pagination--classic")&&i.settings.pages>i.settings.current?g.removeClass("mpc-disabled"):g.is(".mpc-pagination--classic")&&g.removeClass("mpc-disabled"),g.find(".mpc-current, .mpc-disabled").removeClass("mpc-current mpc-disabled"),g.find('[data-page="'+i.settings.current+'"]').addClass("mpc-current"),g.is(".mpc-pagination--classic")&&1==i.settings.current&&g.find(".mpc-pagination__prev").addClass("mpc-disabled"),g.is(".mpc-pagination--classic")&&i.settings.current==i.settings.pages&&g.find(".mpc-pagination__next").addClass("mpc-disabled")})}var c=a(this);if(c.find("li a").on("click",function(c){c.preventDefault();var d=a(this),e=d.parents(".mpc-pagination"),f=a("#"+e.attr("data-grid")).data("query"),g=e.attr("data-type"),h=parseInt(e.attr("data-current")),i=parseInt(e.attr("data-pages")),j=d.parents("li").attr("data-page");return e.is(".mpc-pagination--classic")?h!=j&&d.parent(".mpc-pagination").is(".mpc-disabled")?"":(e.addClass("mpc-disabled"),"prev"==j?f.paged=h>1?h-1:!1:"next"==j?f.paged=i>h?h+1:!1:f.paged=parseInt(j)!=h?parseInt(j):!1,void(f.paged&&b(f,g,d))):""}),c.find(".mpc-pagination__link").on("click",function(c){c.preventDefault();var d=a(this),e=d.parents(".mpc-pagination"),f=a("#"+e.attr("data-grid")).data("query"),g=e.attr("data-type"),h=parseInt(e.attr("data-current")),i=parseInt(e.attr("data-pages"));return e.is(".mpc-pagination--classic")?"":h>=i||d.is(".mpc-disabled")?"":(d.addClass("mpc-disabled"),f.paged=h+1,void b(f,g,d))}),c.on("mpc.infinity",function(){var b=a(this);b.is(".mpc-pagination--infinity")&&b.find(".mpc-pagination__link").trigger("click")}),a("#"+c.data("grid")).on("layoutComplete",function(){MPCwaypoint.refreshAll()}),c.is(".mpc--square-init")){var d=c.find(".mpc-pagination__prev"),e=c.find(".mpc-pagination__next"),f=c.find(".mpc-pagination__link"),g=0;a.each(c.find(".mpc-pagination__link"),function(){var b=a(this);g=Math.max(b.width(),b.height(),g)}),f.css({width:g+"px",height:g+"px","line-height":g+"px"}),d.css({height:g+"px","line-height":g+"px"}),e.css({height:g+"px","line-height":g+"px"}),c.removeClass("mpc--square-init").addClass("mpc--square")}c.trigger("mpc.inited")})}(jQuery);